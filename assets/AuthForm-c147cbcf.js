import{j as e,I as U,a as W,u as P,r as u,B as O,N as V,s as $,b as N,c as C}from"./index-0a4a6ea6.js";import{c as p,R as Q,E as X,a as H,b as Y,P as z,d as B,e as J,U as K,f as T,u as Z,I as g,V as d,o as y}from"./constants-8877dbcf.js";const F="_eyeBtn_y8tri_1",ss={eyeBtn:F},es=({setShowPassword:a,showPassword:t})=>e.jsx("button",{type:"button",className:ss.eyeBtn,onClick:()=>a(i=>!i),children:e.jsx(U,{id:t?"eye-on":"eye-off",className:"eye-icon"})}),as=()=>{const a={email:p().trim().required(Q).matches(X,H),password:p().trim().required(Y).min(7,z)},t=B().shape({...a,name:p().trim().required(J).matches(K,T)}),i=B().shape({...a});return{signupFormSchema:t,signinFormSchema:i}},ns="_label_1ilqp_1",os="_form_1ilqp_6",ts="_btnLinkWrapper_1ilqp_13",is="_navLink_1ilqp_19",rs="_inputIconsMessageBox_1ilqp_35",cs="_loginLastInputIconsMessageBox_1ilqp_40",ms="_lastInputIconsMessageBox_1ilqp_41",o={label:ns,form:os,btnLinkWrapper:ts,navLink:is,inputIconsMessageBox:rs,loginLastInputIconsMessageBox:cs,lastInputIconsMessageBox:ms},ps=({type:a})=>{var I,S,x,E,h,M,b,f,R,w;const t=W();P();const{signupFormSchema:i,signinFormSchema:j}=as(),v=a==="signup"?i:j,[A,c]=u.useState(!1),[L,D]=u.useState(!1),[_,k]=u.useState(!1),{register:m,handleSubmit:q,formState:{errors:n,dirtyFields:s}}=Z({mode:"onChange",resolver:y(v),defaultValues:{name:"",email:"",password:""}}),G=async r=>{if(a==="signup"){c(!0);const l=await t($(r));if(c(!1),l.error)return;N.success("You`ve been successfully registered!")}if(a==="signin"){D(!0);const l=await t(C(r));if(c(!1),l.error)return;N.success("Welcome!")}};return e.jsxs("form",{className:o.form,onSubmit:q(G),children:[e.jsxs("div",{children:[a==="signup"&&e.jsxs("div",{className:o.inputIconsMessageBox,children:[e.jsx(g,{id:"text",label:"Name:",type:"text",...m("name"),className:"nameInput",error:(I=n.name)==null?void 0:I.message,valid:(s==null?void 0:s.name)&&!((S=n.name)!=null&&S.message)}),e.jsx(d,{errorMsg:(x=n.name)==null?void 0:x.message,dirtyField:s==null?void 0:s.name,fieldName:"name"})]}),e.jsxs("div",{className:o.inputIconsMessageBox,children:[e.jsx(g,{id:"mail",label:"Mail:",type:"email",...m("email"),className:"mailInput",error:(E=n.email)==null?void 0:E.message,valid:(s==null?void 0:s.email)&&!((h=n.email)!=null&&h.message)}),e.jsx(d,{errorMsg:(M=n.email)==null?void 0:M.message,dirtyField:s==null?void 0:s.email,fieldName:"email"})]}),e.jsxs("div",{className:a==="signin"?o.loginLastInputIconsMessageBox:o.lastInputIconsMessageBox,children:[e.jsxs("div",{className:o.label,children:[e.jsx(g,{id:"password",label:"Password:",type:_?"text":"password",...m("password"),className:"passwordInput",error:(b=n.password)==null?void 0:b.message,valid:(s==null?void 0:s.password)&&!((f=n.password)!=null&&f.message),autoComplete:"new-password"}),!((R=n.password)!=null&&R.message)&&!(s!=null&&s.password)&&e.jsx(es,{setShowPassword:k,showPassword:_})]}),e.jsx(d,{errorMsg:(w=n.password)==null?void 0:w.message,dirtyField:s==null?void 0:s.password,fieldName:"password"})]})]}),e.jsxs("div",{className:o.btnLinkWrapper,children:[e.jsx(O,{type:"submit",title:a==="signup"?"Registration":"Log In",className:a==="signin"&&"authBtn",disabled:a==="signup"?A:L}),e.jsx(V,{className:({isActive:r})=>`${o.navLink} ${r?o.active:""}`,to:a==="signup"?"/login":"/register",children:a==="signup"?"Already have an account?":"Donâ€™t have an account? "})]})]})};export{ps as A};
